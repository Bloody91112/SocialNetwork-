import{_ as p,o as s,c as n,b as e,t as r,f as i,k as C,d as u,e as h,F as v,i as k,l as g,w,v as B,T as P,g as x,h as I,p as S,j as $,m as E,n as y,q as b}from"./app.56519b3e.js";const T={name:"PostCommentItemsComponent",props:["comment"],computed:{myComment(){return this.comment.user.id===this.$store.getters.user.id}},methods:{deleteComment(){this.$store.dispatch("deleteComment",{comment:this.comment})}}},V={key:0,class:"row my-2"},F={class:"col-md-6"},N={class:"card custom-card"},q={class:"card-header"},D={class:"author"},G={key:0,class:"date"},M={class:"card-body"};function j(o,c,t,f,a,d){return t.comment?(s(),n("div",V,[e("div",F,[e("div",N,[e("div",q,[e("a",D,r(t.comment.user.name),1),t.comment.created_at?(s(),n("span",G,r(`(${t.comment.created_at})`),1)):i("",!0),d.myComment?(s(),n("button",{key:1,onClick:c[0]||(c[0]=(..._)=>d.deleteComment&&d.deleteComment(..._)),class:"deleteComment"},"delete")):i("",!0)]),e("div",M,r(t.comment.content),1)])])])):i("",!0)}const z=p(T,[["render",j],["__scopeId","data-v-ca09e776"]]);const A={name:"PostCommentComponent",props:["comments","post_id"],data(){return{content:null,contentError:null}},computed:{},methods:{createComment(){if(!this.content)return this.contentError="Field content is required";if(this.content.length>500)return this.contentError="Field`s max length is 500 symbols";this.$store.dispatch("createComment",{post_id:this.post_id,user_id:this.$store.getters.user.id,content:this.content}),this.contentError=null,this.content=null}},components:{PostCommentItemsComponent:z}},L=o=>(S("data-v-fbb853d7"),o=o(),$(),o),U={class:"card custom-card my-2"},H={class:"card-body"},J={class:"row mb-3"},K=L(()=>e("label",{for:"content",class:"col-md-2 col-form-label text-md-end"},"Content",-1)),O={class:"col-md-8"},Q={key:0,class:"text-green mt-2"},R=L(()=>e("span",null,"Add comment",-1)),W=[R];function X(o,c,t,f,a,d){const _=C("PostCommentItemsComponent");return t.comments?(s(),n(v,{key:0},[u(g,{name:"list"},{default:h(()=>[(s(!0),n(v,null,k(t.comments,m=>(s(),I(_,{key:m.id,comment:m},null,8,["comment"]))),128))]),_:1}),e("div",U,[e("div",H,[e("div",J,[K,e("div",O,[w(e("textarea",{id:"content","onUpdate:modelValue":c[0]||(c[0]=m=>a.content=m),type:"text",class:"form-control",name:"content"},null,512),[[B,a.content,void 0,{trim:!0}]]),u(P,{name:"fade"},{default:h(()=>[a.contentError?(s(),n("span",Q,r(a.contentError),1)):i("",!0)]),_:1})])])]),e("div",{onClick:c[1]||(c[1]=x((...m)=>d.createComment&&d.createComment(...m),["prevent"])),class:"card-footer card-footer-green-btn"},W)])],64)):i("",!0)}const Y=p(A,[["render",X],["__scopeId","data-v-fbb853d7"]]);const Z={name:"PostItemComponent",props:["post"],data(){return{commentBarStatus:!1}},computed:{...E({user:"user",postLikes:"postLikes"}),likeStatus(){return!!this.postLikes(this.post.id).find(o=>o.user_id===this.user.id)},subscribed(){return!!this.user.subscriptions.find(o=>o.friend.id===this.post.user.id)},myPost(){return this.post.user.id===this.user.id}},methods:{toggleLike(o){this.$store.dispatch("toggleLike",{post_id:this.post.id,status:this.likeStatus,user:this.$store.getters.user,button:o.currentTarget})},deletePost(){this.$store.dispatch("deletePost",{post_id:this.post.id})}},components:{PostCommentComponent:Y}},tt=o=>(S("data-v-69f77cfb"),o=o(),$(),o),et={key:0,class:"card custom-card mb-3"},st={class:"card-header"},ot={href:"#",class:"title"},nt={key:0,class:"tag-list"},ct={href:"#",class:"tag"},dt={key:2,class:"category"},at={href:"#"},rt={class:"card-body"},it={class:"card-footer"},mt={class:"card-footer-data"},_t={class:"left"},lt={key:0,class:"subscribed"},ut={class:"date"},ht={class:"right"},pt=tt(()=>e("span",null,"Likes:",-1)),ft={class:"count"},Ct={class:"count"},vt={key:0,class:"card-footer"};function kt(o,c,t,f,a,d){const _=C("router-link"),m=C("PostCommentComponent");return t.post?(s(),n("div",et,[e("div",st,[e("a",ot,r(t.post.title),1),t.post.tags.length>0?(s(),n("span",nt,[(s(!0),n(v,null,k(t.post.tags,l=>(s(),n("a",ct,r(l.name),1))),256))])):i("",!0),d.myPost?(s(),n("button",{key:1,onClick:c[0]||(c[0]=(...l)=>d.deletePost&&d.deletePost(...l)),class:"deletePost"},"delete")):i("",!0),t.post.category?(s(),n("div",dt,[e("a",at,r(t.post.category.name),1)])):i("",!0)]),e("div",rt,r(t.post.content),1),e("div",it,[e("div",mt,[e("div",_t,[u(_,{to:{name:"author.show",params:{id:t.post.user.id}},class:"author"},{default:h(()=>[y(r(t.post.user.name),1)]),_:1},8,["to"]),d.subscribed?(s(),n("span",lt,"subscribed")):i("",!0),e("span",ut,r(t.post.created_at),1)]),e("div",ht,[e("button",{onClick:c[1]||(c[1]=x((...l)=>d.toggleLike&&d.toggleLike(...l),["prevent"])),class:b([{active:d.likeStatus},"likes"])},[pt,e("span",ft,r(t.post.likes?t.post.likes.length:0),1)],2),e("button",{onClick:c[2]||(c[2]=l=>a.commentBarStatus=!a.commentBarStatus),class:b([{active:a.commentBarStatus},"comments"])},[y(" Comments: "),e("span",Ct,r(t.post.comments?t.post.comments.length:0),1)],2)])])]),u(P,{name:"fade"},{default:h(()=>[a.commentBarStatus?(s(),n("div",vt,[u(m,{post_id:t.post.id,comments:t.post.comments},null,8,["post_id","comments"])])):i("",!0)]),_:1})])):i("",!0)}const yt=p(Z,[["render",kt],["__scopeId","data-v-69f77cfb"]]);const bt={name:"PostListComponent",props:["posts"],methods:{},components:{PostItemComponent:yt}},gt={class:"posts-container"},Pt={key:0,class:"posts"};function xt(o,c,t,f,a,d){const _=C("PostItemComponent");return s(),n("div",gt,[t.posts?(s(),n("div",Pt,[u(g,{name:"list"},{default:h(()=>[(s(!0),n(v,null,k(t.posts,m=>(s(),I(_,{post:m,key:m.id},null,8,["post"]))),128))]),_:1})])):i("",!0)])}const Et=p(bt,[["render",xt],["__scopeId","data-v-395072bf"]]),It={name:"PreloaderComponent"},St={class:"preloader-bg"},$t=e("div",{class:"lds-dual-ring"},null,-1),Lt=[$t];function wt(o,c,t,f,a,d){return s(),n("div",St,Lt)}const Tt=p(It,[["render",wt]]);export{Tt as P,Et as a};
