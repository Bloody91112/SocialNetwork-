import{P,a as E}from"./PreloaderComponent.b983deca.js";import{_ as x,o as t,h as y,e as u,c as o,b as e,w as C,v as T,d as p,t as i,f as a,T as m,F as h,i as f,g as v,p as F,j as B,m as I,k as b}from"./app.56519b3e.js";const M={name:"PostFormComponent",data(){return{title:null,content:null,selectedCategory:null,selectedTags:[],titleError:null,contentError:null,tagsError:null}},mounted(){this.$store.dispatch("getCategories"),this.$store.dispatch("getTags")},computed:{visible(){return this.$store.getters.createFormStatus},user_id(){return this.$store.getters.user.id},categories(){return this.$store.getters.categories},tags(){return this.$store.getters.tags}},methods:{addTag(r){let l=!1;this.selectedTags.forEach(c=>c.id===r.id?l=!0:null),l?this.selectedTags=this.selectedTags.filter(c=>c.id!==r.id):this.selectedTags.push(r)},createPost(){if(!this.title)return this.titleError="Field title is required";if(!this.content)return this.contentError="Field title is required";if(this.selectedTags.length>3)return this.tagsError="Maximum number of tags - 3";let r={title:this.title,content:this.content,user_id:this.user_id};if(this.selectedTags.length>0){let l=[];this.selectedTags.forEach(c=>l.push(c.id)),r.tags=l}this.selectedCategory!=null&&(r.category_id=this.selectedCategory.id),this.$store.dispatch("createPost",r),this.title=null,this.content=null,this.selectedCategory=null,this.selectedTags=[]}}},_=r=>(F("data-v-9a5e6a11"),r=r(),B(),r),S={key:0,class:"card custom-card mb-3"},L=_(()=>e("div",{class:"card-header"},null,-1)),V={class:"card-body"},N={class:"row mb-3"},q=_(()=>e("label",{for:"title",class:"col-md-2 col-form-label text-md-end"},"Title",-1)),D={class:"col-md-8"},U={key:0,class:"text-green mt-2"},j={class:"row mb-3"},G=_(()=>e("label",{for:"content",class:"col-md-2 col-form-label text-md-end"},"Content",-1)),z={class:"col-md-8"},A={key:0,class:"text-green mt-2"},H={class:"row"},J={key:0,class:"col-md-3 mb-2 d-flex align-items-center gap-3 offset-md-2 dropdown"},K=_(()=>e("div",null,"Category",-1)),O={class:"btn btn-green dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Q={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},R=["onClick"],W={key:1,class:"col-md-5 mb-2 d-flex align-items-center gap-3 dropdown"},X=_(()=>e("div",null,"Tags",-1)),Y={class:"btn btn-green dropdown-toggle",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"},Z={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton2"},$=["onClick"],ee={key:0},te={class:"selectedTagsList"},se={class:"selectedTag"},oe={key:0,class:"col-md-5 mt-1 offset-md-2"},ne=_(()=>e("span",null,"Create",-1)),re=[ne];function le(r,l,c,w,s,d){return t(),y(m,{name:"fade"},{default:u(()=>[d.visible?(t(),o("div",S,[L,e("div",V,[e("div",N,[q,e("div",D,[C(e("input",{id:"title","onUpdate:modelValue":l[0]||(l[0]=n=>s.title=n),type:"text",class:"form-control",name:"title"},null,512),[[T,s.title]]),p(m,{name:"fade"},{default:u(()=>[s.titleError?(t(),o("span",U,i(s.titleError),1)):a("",!0)]),_:1})])]),e("div",j,[G,e("div",z,[C(e("textarea",{id:"content","onUpdate:modelValue":l[1]||(l[1]=n=>s.content=n),type:"text",class:"form-control",name:"content"},null,512),[[T,s.content]]),p(m,{name:"fade"},{default:u(()=>[s.contentError?(t(),o("span",A,i(s.contentError),1)):a("",!0)]),_:1})])]),e("div",H,[d.categories?(t(),o("div",J,[K,e("button",O,i(s.selectedCategory!=null?s.selectedCategory.name:"none"),1),e("ul",Q,[(t(!0),o(h,null,f(d.categories,n=>(t(),o("li",null,[e("a",{onClick:v(g=>this.selectedCategory=n,["prevent"]),class:"dropdown-item",href:"#"},i(n.name),9,R)]))),256))])])):a("",!0),d.tags.length>0?(t(),o("div",W,[X,e("button",Y,i(s.selectedTags.length>0?s.selectedTags[s.selectedTags.length-1].name:"none"),1),e("ul",Z,[(t(!0),o(h,null,f(d.tags,n=>(t(),o("li",null,[e("a",{onClick:v(g=>d.addTag(n),["prevent"]),class:"dropdown-item",href:"#"},i(n.name),9,$)]))),256))]),s.selectedTags.length?(t(),o("span",ee,[e("span",te,[(t(!0),o(h,null,f(s.selectedTags,n=>(t(),o("span",se,i(n.name),1))),256))])])):a("",!0)])):a("",!0)]),p(m,{name:"fade"},{default:u(()=>[s.tagsError?(t(),o("div",oe,i(s.tagsError),1)):a("",!0)]),_:1})]),e("div",{onClick:l[2]||(l[2]=v((...n)=>d.createPost&&d.createPost(...n),["prevent"])),class:"card-footer card-footer-green-btn"},re)])):a("",!0)]),_:1})}const de=x(M,[["render",le],["__scopeId","data-v-9a5e6a11"]]);const ae={name:"Index",mounted(){this.$store.dispatch("getPosts")},computed:{...I({posts:"posts",loading:"loading"})},components:{PreloaderComponent:P,PostFormComponent:de,PostListComponent:E}},ie={class:"posts-page"},ce={key:1,class:"no-items"};function _e(r,l,c,w,s,d){const n=b("PostFormComponent"),g=b("PostListComponent"),k=b("PreloaderComponent");return t(),o("div",ie,[this.loading?a("",!0):(t(),o(h,{key:0},[p(n),this.posts.length>0?(t(),y(g,{key:0,posts:this.posts},null,8,["posts"])):(t(),o("div",ce,"No such posts..."))],64)),this.loading?(t(),y(k,{key:1})):a("",!0)])}const pe=x(ae,[["render",_e],["__scopeId","data-v-8c1554bb"]]);export{pe as default};
